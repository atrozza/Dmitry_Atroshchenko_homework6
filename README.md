#### Dmitry Atroshchenko
#### Description: Homework 6
#### Date: 10/12/2023
#### My version Python 3.11


  
# **1. Система бронирования номеров в отеле**
Этот репозиторий содержит простую программу на Python для бронирования номеров в отеле. Программа использует классы для представления номеров отеля, гостей и самого отеля. В ней демонстрируется процесс бронирования номера, а также обрабатывается ситуация, когда номер уже забронирован.

## **Описание**
Программа моделирует систему бронирования номеров в отеле. В ней определены три класса:
1. `Room` **(Комната)**: Представляет номер отеля с атрибутами, такими как номер комнаты, вместимость, стоимость за ночь, статус бронирования и информация о госте.
2. `Guest` **(Гость)**: Представляет гостя с атрибутами, такими как имя и возраст.
3. `Hotel` **(Отель)**: Представляет сам отель, содержащий список комнат и методы для добавления комнат.

## **Классы**
### **Room (Комната)**
#### **Атрибуты:**
- `room_number`: Номер комнаты.
- `capacity`: Максимальная вместимость комнаты.
- `price_per_night`: Стоимость проживания за ночь.
- `is_booked`: Булево значение, указывающее, забронирована ли комната.
- `guest`: Ссылка на гостя, забронировавшего комнату.  
#### **Методы:**
- `book_room(guest)`: Забронировать комнату для указанного гостя, если комната еще не забронирована.

### **Guest (Гость)**
#### **Атрибуты:**
- `name`: Имя гостя.
- `age`: Возраст гостя.

### **Hotel (Отель)**
#### **Атрибуты:**
- `name`: Название отеля.
- `rooms`: Список комнат в отеле.  
#### **Методы:**
- `add_room(room)`: Добавить комнату в отель.
## **Пример**
### python
```
# Создание экземпляра отеля
hotel = Hotel("Luxury Hotel")

# Создание экземпляров нескольких комнат
room1 = Room(101, 2, 150)
room2 = Room(102, 4, 250)
room3 = Room(103, 1, 100)

# Добавление комнат в отель
hotel.add_room(room1)
hotel.add_room(room2)
hotel.add_room(room3)

# Создание экземпляров гостей
guest1 = Guest("Alice", 25)
guest2 = Guest("Bob", 30)

# Бронирование комнаты для первого гостя
room1.book_room(guest1)

# Попытка повторного бронирования той же комнаты другим гостем
room1.book_room(guest2)
```
# **2. Декоратор Retry**
Этот код на Python определяет декоратор с именем `retry`, который позволяет вызывать декорированную функцию повторно до успешного выполнения или до достижения указанного максимального числа попыток. Если превышено максимальное число попыток, декоратор вызывает пользовательское исключение `TooManyErrors`.  
## **Использование**
### python
```
# Импорт пользовательского исключения
class TooManyErrors(Exception):
    pass

# Определение декоратора с параметром max_attempts
def retry(max_attempts):
    # Внутренний декоратор, принимающий функцию для декорирования
    def decorator(func):
        # Определение внутренней функции-обертки
        def wrapper(*args, **kwargs):
            # Инициализация счетчика попыток
            attempts = 0
            # Запуск цикла, продолжающегося до достижения максимального числа попыток
            while attempts < max_attempts:
                try:
                    # Вызов декорированной функции
                    result = func(*args, **kwargs)
                    # Возврат результата в случае успешного выполнения
                    return result
                except Exception as e:
                    # Обработка исключения: вывод информации о неудачной попытке и увеличение счетчика
                    print(f"Попытка {attempts + 1} завершилась ошибкой: {str(e)}")
                    attempts += 1
            # Если достигнуто максимальное число попыток, возбуждение пользовательского исключения
            raise TooManyErrors(f"Превышено максимальное число попыток ({max_attempts})")

        # Возврат функции-обертки из декоратора
        return wrapper
    # Возврат внутреннего декоратора из основного декоратора
    return decorator

# Пример использования декоратора
@retry(max_attempts=3)
def example_function():
    # Импорт модуля random для генерации случайных чисел
    import random
    # Генерация случайного числа 0 или 1
    if random.randint(0, 1) == 0:
        # Вывод сообщения об успешном выполнении функции
        print("Функция выполнена успешно")
    else:
        # Если случайное число равно 1, возбуждение исключения ValueError для имитации неудачной попытки
        raise ValueError("Функция завершилась ошибкой")

# Попытка вызова декорированной функции, обработка возможного исключения TooManyErrors
try:
    example_function()
except TooManyErrors as e:
    # Вывод информации об исключении в случае превышения максимального числа попыток
    print(f"Поймано исключение TooManyErrors: {str(e)}")
```
## **Объяснение**
Этот код демонстрирует использование декоратора для повторного вызова функции с указанным числом попыток. Если функция завершается неудачей, декоратор перехватывает исключение, выводит сообщение об ошибке и повторяет вызов функции до её успешного выполнения или до достижения максимального числа попыток. Если достигнуто максимальное число попыток, возбуждается пользовательское исключение `TooManyErrors`.
## **Настройка**
Вы можете настроить декоратор, изменяя параметр `max_attempts` и модифицируя поведение декорированной функции.
